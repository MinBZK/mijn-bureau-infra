bases:
  - "../../bases/default.yaml.gotmpl"

releases:
  - name: "ollama"
    chart: "./charts/ollama"
    condition: ai.selfhost.enabled
    namespace: {{ .Values.applications.ai.namespace }}
    createNamespace: false
    values:
      - "values.yaml.gotmpl"
    hooks:
      - events: ["prepare"]
        showlogs: true
        command: "kubectl"
        args:
          - "apply"
          - "-f"
          - "network-policies/"
      - events: ["postuninstall"]
        showlogs: true
        command: "kubectl"
        args:
          - "delete"
          - "-f"
          - "network-policies/"
